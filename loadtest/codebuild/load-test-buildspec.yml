version: 0.2

phases:
  install:
    commands:
      - curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin --channel 8.0 
      - npm i artillery -g
  build:
    commands:
      - export temp1=$(pwd);echo $temp1
      - cd loadtest/codebuild
      - ./run-all-load-tests.sh
artifacts:
  files:
    - src/NET6MinimalAPI/Report/*
    - src/NET6MinimalAPIWebAdapter/Report/*
    - src/NET8/Report/*
    - src/NET8MinimalAPI/Report/*
  name: loadtest-$(date +%Y-%m-%H-%M) 